{
  "extends": ["//"],
  "tasks": {
    "prep": {
      "dependsOn": ["prep:scripts", "prep:schema"]
    },
    "prep:scripts": {
      "dependsOn": ["^prep"],
      "inputs": ["src/**"],
      "outputs": ["dist/**"]
    },
    "prep:schema": {
      "dependsOn": ["prep:database"]
    },
    "prep:database": {
      "dependsOn": ["prep:composer", "^prep"],
      "inputs": [
        "turbo-seed.txt",
        "prep-database.sh",
        "config/**",
        "web/modules/custom/**",
        "web/themes/custom/**"
      ],
      "outputs": [
        "web/sites/default/files/**",
        "../../packages/ui/static/stories/webforms/**"
      ],
      "env": ["CI", "LAGOON", "SKIP_DRUPAL_INSTALL", "GITHUB_ACTIONS"]
    },
    "prep:composer": {
      "inputs": ["composer.json", "composer.lock", "scaffold/**", "patches/**"],
      "outputs": [
        "drush/**",
        "vendor/**",
        "!*/**/.git/**",
        "web/**",
        "!web/modules/custom/**",
        "!web/themes/custom/**",
        "!web/sites/default/files/**"
      ]
    },
    "test:integration": {
      "dependsOn": [
        "prep",
        "@custom-tests/e2e#test:integration:drupal",
        "@custom-tests/schema#test:integration"
      ]
    }
  }
}
